<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Required</title>
    <script>
        // ‚úÖ Function to extract `start` token from the URL
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // ‚úÖ Main Execution
        document.addEventListener("DOMContentLoaded", function () {
            const token = getQueryParam("start");

            if (!token) {
                document.body.innerHTML = "<h2>‚ùå Invalid link. Please request a new one.</h2>";
                return;
            }

            // ‚úÖ Ask Telegram Bot 2 for permission
            fetch(`https://api.telegram.org/bot7907835521:AAE6FP3yU-aoKYXXEX05kio4SV3j1IJACyc/sendMessage`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    chat_id: 6142725643,  // Replace with your admin chat ID or the user's chat ID
                    text: `üîÑ A user is requesting access. \n\nToken: ${token}`
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.ok) {
                    // ‚úÖ Redirect the user after 3 seconds to Bot 2 for permission
                    setTimeout(() => {
                        window.location.href = `https://t.me/vipsignals221bot?start=${token}`;
                    }, 3000);
                } else {
                    document.body.innerHTML = "<h2>‚ùå Permission request failed. Please try again.</h2>";
                }
            })
            .catch(error => {
                console.error("Error:", error);
                document.body.innerHTML = "<h2>‚ùå Failed to communicate with the bot.</h2>";
            });
        });
    </script>
</head>
<body>
    <h2>üîÑ Please wait while we verify your access...</h2>
</body>
</html>
